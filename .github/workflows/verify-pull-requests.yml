name: Verify pull requests

on:
  pull_request:
    branches:
      - main

jobs:
  verify-lint:
    uses: ./.github/workflows/lint.yml

  verify-build:
    uses: ./.github/workflows/build-library.yml

  verify-storybook:
    uses: ./.github/workflows/test-storybook.yml

  verify-storybook-legacy-peerdeps-react:
    uses: ./.github/workflows/test-storybook-legacy-peerdeps-react.yml
  
  verify-storybook-legacy-peerdeps-bpmn-io:
    uses: ./.github/workflows/test-storybook-legacy-peerdeps-bpmn-io.yml

  deploy-pull-request:
    needs:
      - verify-lint
      - verify-build
      - verify-storybook
      - verify-storybook-legacy-peerdeps-react
      - verify-storybook-legacy-peerdeps-bpmn-io
    
    uses: ./.github/workflows/deploy-branch-storybook.yml

  