import { Meta } from "@storybook/blocks";

<Meta title="Modules/Dynamic Overlays Module" />

# Overview

This module extends the possibilities provided by the `OverlaysModule` from diagram-js. While this module already gives us the tooling to define overlays for each element, some more complex overlays might depend on the current root element, available elements and so on. Using this module overlays can be defined as builder functions that have access to additional information that are passed as `OverlayBuilderEnvironment`. This way, we try to reduce the neccessity to pass diagram instances around.

// TODO api documentation for the interface OverlayBuilderEnvironment

# Configuration

The `Dynamic Overlays Module` can be added to any `Diagram` instance via the `additionalModules` config property.

```js
import CoreModule from 'bpmn-js/lib/core';
import { useBaseViewer } from "bpmn-react/Viewer"
import { DynamicOverlaysModule } from "bpmn-react/Modules/DynamicOverlays"

const BaseViewer = ({ xml }) => {
    const [handleViewerRef, viewer] = useBaseViewer({ additionalModules: [ CoreModule, DynamicOverlays ] });

    useEffect(() => {
        if (xml) {
            viewer?.importXML(xml);
        }
    }, [viewer, xml])

    return <div ref={ handleViewerRef } />
}
```

# Usage

When the `DynamicOverlaysModule` is configured properly, a service called `dynamicOverlays` is provided.

// TODO api documentation for the interface DynamicOverlayService

# Examples

// TODO examples for plain overlay definitions and builders
// TODO linkt to Overlay stories